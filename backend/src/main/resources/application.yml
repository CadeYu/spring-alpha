spring:
  application:
    name: spring-alpha-backend
  
  # PostgreSQL (Neon) Configuration
  datasource:
    url: jdbc:postgresql://ep-super-night-a1grbtke-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require
    username: ${NEON_USERNAME:neondb_owner}
    password: ${NEON_PASSWORD:}
    driver-class-name: org.postgresql.Driver
  
  jpa:
    hibernate:
      ddl-auto: update
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    show-sql: false
  
  # Spring AI Configuration
  ai:
    # OpenAI (Groq) - 当前主力
    openai:
      base-url: https://api.groq.com/openai
      # 使用环境变量注入，默认值为空 (防止 GitHub 泄露)
      api-key: ${GROQ_API_KEY:}
      model: llama-3.3-70b-versatile
    
    # Vertex AI (Gemini) - 备用，防止 GeminiStrategy 启动报错
    vertex:
      ai:
        gemini:
          api-key: ${GEMINI_API_KEY:placeholder_key}
    
    # PGVector 向量存储配置
    vectorstore:
      pgvector:
        initialize-schema: true  # 自动创建 vector_store 表
        dimensions: 768          # Gemini text-embedding-004 维度
        index-type: HNSW
        distance-type: COSINE_DISTANCE





app:
  # 切换默认策略：groq (Groq Llama 3.3) | openai | gemini | enhanced-mock (测试)
  ai-provider: groq  # ← 切换到真实 LLM！
  
  # OpenAI Configuration (optional - requires OPENAI_API_KEY)
  openai:
    enabled: ${OPENAI_ENABLED:false}
    api-key: ${OPENAI_API_KEY:}
    model: gpt-4o-mini  # or gpt-4o, gpt-4-turbo
  
  # Gemini Configuration (optional - requires GEMINI_API_KEY)
  gemini:
    enabled: ${GEMINI_ENABLED:false}
    api-key: ${GEMINI_API_KEY:}
    model: gemini-1.5-flash  # or gemini-1.5-pro
  
  # Financial Modeling Prep API Configuration (Updated Feb 2026)
  # API key is loaded from environment variable (set in start_backend.sh)
  fmp:
    api-key: ${FMP_API_KEY:}
    base-url: https://financialmodelingprep.com/stable

server:
  port: 8081

logging:
  level:
    root: INFO
    com.springalpha: DEBUG
